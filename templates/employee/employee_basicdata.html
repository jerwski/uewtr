{% extends 'base.html' %}
{% load bootstrap4 %}

{% block title %}Add basic data of employee{% endblock %}

{% block content %}

  <div class="container uk-bg-bisque">
  {% include 'blocks/header.html' %}

    <div class="row">
      <div class="col-4">
        <div class="uk-headline">
          ACTIVE EMPLOYEES
        </div>
        <div class="uk-table-scroll-md mt-3">
          <table class="uk-table">
            <tbody>
            {% for employee in employees_st %}
              <tr>
                {% if request.path == '/employee/add_change/basicdata/' %}
                  <td class="text-right">{{ forloop.counter }}.</td><td><a class="font-weight-bold" href="{{ employee.get_absolute_url }}">{{ employee }}</a></td>
                {% else %}
                  {% if employee_id == employee.id %}
                    <td class="text-right" id="{{ employee_id }}">{{ forloop.counter }}.</td><td><a class="font-weight-bold text-danger" href="{{ employee.get_absolute_url }}">{{ employee }}</a></td>
                  {% else %}
                    <td class="text-right" id="{{ employee_id }}">{{ forloop.counter }}.</td><td><a class="font-weight-bold" href="{{ employee.get_absolute_url }}">{{ employee }}</a></td>
                  {% endif %}
                {% endif %}
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-4">
        <div class="uk-headline">
          DEACTIVE EMPLOYEES
        </div>
        <div class="uk-table-scroll-md mt-3">
          <table class="uk-table">
            <tbody>
            {% for employee in employees_sf %}
              <tr>
              {% if employee_id == employee.id %}
                <td class="text-right" id="{{ employee_id }}">{{ forloop.counter }}.</td><td><a class="font-weight-bold text-danger" href="{{ employee.get_absolute_url }}">{{ employee }}</a></td>
              {% else %}
                <td class="text-right" id="{{ employee_id }}">{{ forloop.counter }}.</td><td><a class="font-weight-bold" href="{{ employee.get_absolute_url }}">{{ employee }}</a></td>
              {% endif %}
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-4">
        <div class="uk-headline">
          {% if new_employee %}ADD EMPLOYEE BASIC DATA{% else %}CHANGE EMPLOYEE BASIC DATA{% endif %}
        </div>

        <form action="{% if employee_id %}{% url 'employee:employee_basicdata' employee_id %}{% else %}{% url 'employee:employee_basicdata' %}{% endif %}" method="POST">{% csrf_token %}
          <div class="row">
            <div class="col text-center mt-3">
              <div class="input-group mt-1">
                <div class="input-group-prepend">
                  <span class="input-group-text bg-info">Forename</span>
                </div>
                {% bootstrap_field form.forename form_group_class='form-inline' show_label=False placeholder='Type forename...' %}
              </div>
              <div class="input-group mt-1">
                <div class="input-group-prepend">
                  <span class="input-group-text bg-info">Surname&nbsp;&nbsp;</span>
                </div>
                {% bootstrap_field form.surname form_group_class='form-inline' show_label=False placeholder='Type surname...' %}
              </div>
              <div class="input-group mt-1">
                <div class="input-group-prepend">
                  <span class="input-group-text bg-info">Pesel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                </div>
                {% bootstrap_field form.pesel form_group_class='form-inline' show_label=False placeholder='Type pesel...' %}
              </div>
            </div>
          </div>

          <div class="row">
            {% if employee_id and extdata %}
              <div class="col-6">
                {% bootstrap_field form.leave size='small' label_class='uk-text-small font-italic font-weight-bold' %}
              </div>
              <div class="col-6">
                {% bootstrap_field form.status size='small' label_class='uk-text-small font-italic font-weight-bold' %}
              </div>
            {% else %}
              <div class="col-3"></div>
              <div class="col-6">
                {% bootstrap_field form.leave size='small' label_class='uk-text-small font-italic font-weight-bold' %}
              </div>
              <div class="col-3 d-none">
                {% bootstrap_field form.status size='small' label_class='uk-text-small font-italic font-weight-bold' %}
              </div>
            {% endif %}
            {% if employee_id and extdata == False %}
              <p class="uk-text-small">Until you complete employee <span class="text-danger">{{ worker }}</span> extend data, you won't be able to change his status to <span class="text-light">ACTIVE</span>.</p>
            {% endif %}
          </div>

          <div class="row">
            <div class="col text-center">
              {% if new_employee %}
                <div class="btn btn-sm btn-block mt-5">
                  <button type="submit" class="btn btn-outline-success btn-block">Confirm</button>
                </div>
              {% else %}
                {% if worker.status %}
                  <div class="btn-group btn-group-sm mt-5" role="group">
                    <a href="{% url 'employee:employee_extendeddata' employee_id %}" class="btn btn-outline-danger">Change extend data</a>
                    <a href="{% url 'employee:employee_hourly_rate' employee_id %}" class="btn btn-outline-primary">Update rate</a>
                    <button type="submit" class="btn btn-outline-success">Confirm</button>
                  </div>
                {% else %}
                  <div class="btn-group btn-group-sm mt-1" role="group">
                    <a href="{% url 'employee:employee_extendeddata' employee_id %}" class="btn btn-outline-danger">Change extend data</a>
                    <button type="submit" class="btn btn-outline-success">Confirm changes</button>
                  </div>
                {% endif %}
              {% endif %}
            </div>
          </div>
        </form>
        <hr class="small">
        {% if worker.status == False %}
          <div class="text-center uk-text-value">
            <p>You can delete all records in database for {{ worker }}...</p>
            <p class="text-danger blink">Think twice before you decide...</p>
          </div>
        {% elif worker.status == True %}
          <div class="text-center uk-text-value blink">
            <p>If you want delete records in database for <span class="text-danger">{{ worker }}</span> set status on DEACTIVE...</p>
          </div>
        {% endif %}
      </div>
    </div>

    <div class="row">
        <div class="col-8 text-center">
          <div class="btn btn-group btn-block" role="group">
            <a href="{% url 'account:dashboard' %}" class="btn btn-outline-dark">Dashboard</a>
            {% if not new_employee %}
              <a href="{% url 'employee:employee_basicdata' %}" class="btn btn-outline-info">Add new employee</a>
            {% endif %}
          </div>
        </div>
        {% if records %}
          <div class="col-4 text-center">
            {% include 'blocks/erase_modal.html' %}
          </div>
        {% endif %}
    </div>

  </div>

{% endblock %}
